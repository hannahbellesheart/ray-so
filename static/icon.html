<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Icon Maker - Ray.so</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
      .icon-page {
        display: flex;
        width: 100%;
        min-height: calc(100vh - 50px);
        padding: 32px;
        gap: 48px;
      }

      @media (max-width: 968px) {
        .icon-page {
          flex-direction: column;
          gap: 32px;
        }
      }

      .icon-preview-section {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 32px;
      }

      .icon-canvas-wrapper {
        position: relative;
      }

      .icon-canvas {
        width: 256px;
        height: 256px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 128px;
        line-height: 1;
        transition: all 300ms ease;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        user-select: none;
      }

      .icon-controls-section {
        min-width: 320px;
        max-width: 400px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .control-panel {
        border: 1px solid var(--gray-5);
        border-radius: 12px;
        background: var(--gray-2);
        overflow: hidden;
      }

      .control-panel-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 20px;
        background: var(--gray-3);
        border-bottom: 1px solid var(--gray-5);
        cursor: pointer;
        user-select: none;
      }

      .control-panel-title {
        color: var(--gray-12);
        font-size: 14px;
        font-weight: 600;
      }

      .control-panel-content {
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .control-panel-content.collapsed {
        display: none;
      }

      .form-row {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .form-row label {
        color: var(--gray-11);
        font-size: 13px;
        font-weight: 500;
      }

      .form-row input[type="text"],
      .form-row input[type="number"],
      .form-row select {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid var(--gray-5);
        border-radius: 8px;
        background: var(--gray-3);
        color: var(--gray-12);
        font-size: 14px;
        font-family: inherit;
      }

      .form-row input[type="range"] {
        width: 100%;
      }

      .gradient-presets-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(48px, 1fr));
        gap: 8px;
      }

      .gradient-preset {
        height: 48px;
        border: 2px solid transparent;
        border-radius: 8px;
        cursor: pointer;
        transition: all 200ms ease;
      }

      .gradient-preset:hover {
        border-color: var(--gray-6);
        transform: scale(1.05);
      }

      .gradient-preset.active {
        border-color: var(--brand);
        box-shadow: 0 0 0 2px var(--brand);
      }

      .slider-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .slider-row label {
        color: var(--gray-11);
        font-size: 13px;
        font-weight: 500;
        flex-shrink: 0;
      }

      .slider-row input[type="range"] {
        flex: 1;
      }

      .slider-row .value {
        color: var(--gray-11);
        font-size: 13px;
        font-weight: 500;
        min-width: 45px;
        text-align: right;
      }

      .color-input-wrapper {
        position: relative;
        display: flex;
        gap: 8px;
      }

      .color-swatch {
        width: 42px;
        height: 42px;
        border: 1px solid var(--gray-5);
        border-radius: 8px;
        cursor: pointer;
        flex-shrink: 0;
      }

      .color-text-input {
        flex: 1;
        padding: 10px 12px;
        border: 1px solid var(--gray-5);
        border-radius: 8px;
        background: var(--gray-3);
        color: var(--gray-12);
        font-size: 14px;
        font-family: monospace;
      }

      .export-buttons {
        display: flex;
        gap: 8px;
      }

      .export-buttons button {
        flex: 1;
      }

      .fill-type-tabs {
        display: flex;
        gap: 8px;
        padding: 4px;
        background: var(--gray-3);
        border-radius: 8px;
      }

      .fill-type-tab {
        flex: 1;
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        background: transparent;
        color: var(--gray-11);
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        transition: all 200ms ease;
      }

      .fill-type-tab:hover {
        background: var(--gray-4);
        color: var(--gray-12);
      }

      .fill-type-tab.active {
        background: var(--brand);
        color: white;
      }

      .emoji-input {
        font-size: 32px;
        text-align: center;
        padding: 16px;
      }

      .angle-input-group {
        display: flex;
        gap: 8px;
      }

      .angle-input-group input[type="range"] {
        flex: 1;
      }

      .angle-input-group input[type="number"] {
        width: 80px;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navigation">
      <div class="nav-content">
        <div class="nav-left">
          <div class="nav-dropdown">
            <button class="nav-trigger" id="navTrigger">
              <div class="nav-trigger-icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path
                    d="M8 3C8.55228 3 9 2.55228 9 2C9 1.44772 8.55228 1 8 1C7.44772 1 7 1.44772 7 2C7 2.55228 7.44772 3 8 3Z"
                    fill="currentColor"
                  />
                  <path
                    d="M8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9Z"
                    fill="currentColor"
                  />
                  <path
                    d="M9 14C9 14.5523 8.55228 15 8 15C7.44772 15 7 14.5523 7 14C7 13.4477 7.44772 13 8 13C8.55228 13 9 13.4477 9 14Z"
                    fill="currentColor"
                  />
                </svg>
              </div>
              <span>Icon Maker</span>
              <div class="nav-trigger-chevron">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path
                    d="M4 6L8 10L12 6"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
            </button>
            <div class="nav-menu" id="navMenu">
              <a href="index.html" class="nav-menu-item">
                <div class="nav-menu-icon">üì∑</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Code Images</div>
                  <div class="nav-menu-desc">Turn code into images</div>
                </div>
              </a>
              <a href="icon.html" class="nav-menu-item active">
                <div class="nav-menu-icon">üé®</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Icon Maker</div>
                  <div class="nav-menu-desc">Create beautiful icons</div>
                </div>
              </a>
              <a href="prompts.html" class="nav-menu-item">
                <div class="nav-menu-icon">ü§ñ</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Prompts</div>
                  <div class="nav-menu-desc">AI prompts</div>
                </div>
              </a>
              <a href="presets.html" class="nav-menu-item">
                <div class="nav-menu-icon">‚ö°</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Presets</div>
                  <div class="nav-menu-desc">AI presets</div>
                </div>
              </a>
              <a href="quicklinks.html" class="nav-menu-item">
                <div class="nav-menu-icon">üîó</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Quicklinks</div>
                  <div class="nav-menu-desc">Quick access links</div>
                </div>
              </a>
              <a href="snippets.html" class="nav-menu-item">
                <div class="nav-menu-icon">üìù</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Snippets</div>
                  <div class="nav-menu-desc">Text snippets & symbols</div>
                </div>
              </a>
              <a href="themes.html" class="nav-menu-item">
                <div class="nav-menu-icon">üé®</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Themes</div>
                  <div class="nav-menu-desc">Color themes</div>
                </div>
              </a>
            </div>
          </div>
        </div>
        <div class="nav-by">by <a href="https://raycast.com" class="nav-raycast" target="_blank">Raycast</a></div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container">
      <div class="icon-page">
        <!-- Preview -->
        <div class="icon-preview-section">
          <div class="icon-canvas-wrapper">
            <div class="icon-canvas" id="iconCanvas">
              <span id="iconContent">üé®</span>
            </div>
          </div>
        </div>

        <!-- Controls -->
        <div class="icon-controls-section">
          <!-- Icon Input -->
          <div class="control-panel">
            <div class="control-panel-header">
              <h3 class="control-panel-title">Icon</h3>
            </div>
            <div class="control-panel-content">
              <div class="form-row">
                <label>Emoji or Text</label>
                <input type="text" id="emojiInput" class="emoji-input" value="üé®" maxlength="4" />
              </div>
            </div>
          </div>

          <!-- Gradient Presets -->
          <div class="control-panel">
            <div class="control-panel-header" data-toggle="presets">
              <h3 class="control-panel-title">Gradient Presets</h3>
            </div>
            <div class="control-panel-content" id="presetsContent">
              <div class="gradient-presets-grid" id="presetsGrid"></div>
            </div>
          </div>

          <!-- Fill Styles -->
          <div class="control-panel">
            <div class="control-panel-header" data-toggle="fill">
              <h3 class="control-panel-title">Fill Styles</h3>
            </div>
            <div class="control-panel-content" id="fillContent">
              <div class="fill-type-tabs">
                <button class="fill-type-tab active" data-fill="linear">Linear</button>
                <button class="fill-type-tab" data-fill="radial">Radial</button>
                <button class="fill-type-tab" data-fill="solid">Solid</button>
              </div>

              <div class="form-row">
                <label id="primaryColorLabel">Primary Color</label>
                <div class="color-input-wrapper">
                  <div class="color-swatch" id="primarySwatch"></div>
                  <input type="text" id="primaryColor" class="color-text-input" value="#8E2DE2" />
                </div>
              </div>

              <div class="form-row" id="secondaryColorRow">
                <label>Secondary Color</label>
                <div class="color-input-wrapper">
                  <div class="color-swatch" id="secondarySwatch"></div>
                  <input type="text" id="secondaryColor" class="color-text-input" value="#4A00E0" />
                </div>
              </div>

              <div class="form-row" id="angleRow">
                <label>Angle</label>
                <div class="angle-input-group">
                  <input type="range" id="angleSlider" min="0" max="360" value="45" />
                  <input type="number" id="angleInput" min="0" max="360" value="45" />
                </div>
              </div>

              <div class="form-row" id="spreadRow" style="display: none">
                <div class="slider-row">
                  <label>Spread</label>
                  <input type="range" id="spreadSlider" min="0" max="100" value="100" />
                  <span class="value" id="spreadValue">100%</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Background Options -->
          <div class="control-panel">
            <div class="control-panel-header" data-toggle="background">
              <h3 class="control-panel-title">Background Options</h3>
            </div>
            <div class="control-panel-content" id="backgroundContent">
              <div class="form-row">
                <div class="slider-row">
                  <label>Radius</label>
                  <input type="range" id="radiusSlider" min="0" max="128" value="64" />
                  <span class="value" id="radiusValue">64px</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Icon Options -->
          <div class="control-panel">
            <div class="control-panel-header" data-toggle="icon">
              <h3 class="control-panel-title">Icon Options</h3>
            </div>
            <div class="control-panel-content" id="iconOptions">
              <div class="form-row">
                <label>Icon Color</label>
                <div class="color-input-wrapper">
                  <div class="color-swatch" id="iconColorSwatch"></div>
                  <input type="text" id="iconColor" class="color-text-input" value="#FFFFFF" />
                </div>
              </div>

              <div class="form-row">
                <div class="slider-row">
                  <label>Size</label>
                  <input type="range" id="iconSizeSlider" min="32" max="200" value="128" />
                  <span class="value" id="iconSizeValue">128px</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Export -->
          <div class="export-buttons">
            <button class="primary" id="exportPngBtn">Export PNG</button>
            <button class="secondary" id="copySvgBtn">Copy SVG</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">Copied!</div>

    <script src="nav.js"></script>
    <script>
      // Gradient presets data (extracted from original)
      const presets = [
        { type: "Linear", start: "#8E2DE2", end: "#4A00E0", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#99F2C8", end: "#1F4037", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#F953C6", end: "#B91D73", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#91EAE4", end: "#7F7FD5", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#F5AF19", end: "#F12711", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#EAAFC8", end: "#EC2F4B", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#FF7DB4", end: "#654EA3", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#00B4DB", end: "#003357", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#A8C0FF", end: "#3F2B96", angle: 90, icon: "#FFFFFF" },
        { type: "Linear", start: "#DD1818", end: "#380202", angle: 135, icon: "#FFFFFF" },
        { type: "Linear", start: "#DECBA4", end: "#3E5151", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#FC466B", end: "#3F5EFB", angle: 180, icon: "#FFFFFF" },
        { type: "Linear", start: "#CCCFE2", end: "#25242B", angle: 180, icon: "#FFFFFF" },
        { type: "Linear", start: "#68AEFF", end: "#003EB7", angle: 180, icon: "#FFFFFF" },
        { type: "Linear", start: "#C9D6FF", end: "#596AA1", angle: 180, icon: "#FFFFFF" },
        { type: "Linear", start: "#5C5C5C", end: "#0F1015", angle: 180, icon: "#FFFFFF" },
        { type: "Radial", start: "#695BF8", end: "#131308", position: "50%,0%", icon: "#FFFFFF" },
        { type: "Radial", start: "#4d4d4d", end: "#000000", position: "50%,0%", icon: "#e6e6e6" },
        { type: "Radial", start: "#f5af19", end: "#f12711", position: "50%,50%", icon: "#FFFFFF" },
        { type: "Radial", start: "#1D6E47", end: "#041B11", position: "50%,0%", icon: "#DCEEDE" },
        { type: "Radial", start: "#ffffff", end: "#666666", position: "50%,100%", icon: "#232323" },
        { type: "Radial", start: "#d9f1f8", end: "#002069", position: "50%,100%", icon: "#e3efff" },
        { type: "Radial", start: "#f95356", end: "#7e0000", position: "50%,50%", icon: "#ffd5d5" },
        { type: "Radial", start: "#ffbb00", end: "#ffe74b", position: "50%,0%", icon: "#2a1a00" },
      ];

      // State
      let currentFillType = "linear";
      let currentPresetIndex = 0;
      let currentSettings = {
        fillType: "linear",
        primaryColor: "#8E2DE2",
        secondaryColor: "#4A00E0",
        angle: 45,
        radius: 64,
        iconColor: "#FFFFFF",
        iconSize: 128,
        emoji: "üé®",
        spread: 100,
      };

      // Elements
      const iconCanvas = document.getElementById("iconCanvas");
      const iconContent = document.getElementById("iconContent");
      const emojiInput = document.getElementById("emojiInput");
      const primaryColor = document.getElementById("primaryColor");
      const secondaryColor = document.getElementById("secondaryColor");
      const primarySwatch = document.getElementById("primarySwatch");
      const secondarySwatch = document.getElementById("secondarySwatch");
      const angleSlider = document.getElementById("angleSlider");
      const angleInput = document.getElementById("angleInput");
      const radiusSlider = document.getElementById("radiusSlider");
      const radiusValue = document.getElementById("radiusValue");
      const iconColor = document.getElementById("iconColor");
      const iconColorSwatch = document.getElementById("iconColorSwatch");
      const iconSizeSlider = document.getElementById("iconSizeSlider");
      const iconSizeValue = document.getElementById("iconSizeValue");
      const spreadSlider = document.getElementById("spreadSlider");
      const spreadValue = document.getElementById("spreadValue");
      const exportPngBtn = document.getElementById("exportPngBtn");
      const copySvgBtn = document.getElementById("copySvgBtn");
      const toast = document.getElementById("toast");
      const presetsGrid = document.getElementById("presetsGrid");
      const fillTypeTabs = document.querySelectorAll(".fill-type-tab");
      const secondaryColorRow = document.getElementById("secondaryColorRow");
      const angleRow = document.getElementById("angleRow");
      const spreadRow = document.getElementById("spreadRow");
      const primaryColorLabel = document.getElementById("primaryColorLabel");

      // Toast notification
      function showToast(message) {
        toast.textContent = message;
        toast.classList.add("show");
        setTimeout(() => {
          toast.classList.remove("show");
        }, 2000);
      }

      // Render gradient presets
      function renderPresets() {
        presetsGrid.innerHTML = "";
        presets.forEach((preset, index) => {
          const div = document.createElement("div");
          div.className = `gradient-preset ${index === currentPresetIndex ? "active" : ""}`;

          if (preset.type === "Linear") {
            div.style.background = `linear-gradient(${preset.angle}deg, ${preset.start}, ${preset.end})`;
          } else if (preset.type === "Radial") {
            const [cx, cy] = preset.position.split(",");
            div.style.background = `radial-gradient(circle at ${cx} ${cy}, ${preset.start}, ${preset.end})`;
          }

          div.addEventListener("click", () => applyPreset(index));
          presetsGrid.appendChild(div);
        });
      }

      // Apply preset
      function applyPreset(index) {
        currentPresetIndex = index;
        const preset = presets[index];

        // Update fill type
        currentFillType = preset.type.toLowerCase();
        fillTypeTabs.forEach((tab) => {
          tab.classList.toggle("active", tab.dataset.fill === currentFillType);
        });
        updateFillTypeUI();

        // Update colors
        currentSettings.primaryColor = preset.start;
        currentSettings.secondaryColor = preset.end;
        currentSettings.iconColor = preset.icon;
        primaryColor.value = preset.start;
        secondaryColor.value = preset.end;
        iconColor.value = preset.icon;

        // Update angle if linear
        if (preset.angle !== undefined) {
          currentSettings.angle = preset.angle;
          angleSlider.value = preset.angle;
          angleInput.value = preset.angle;
        }

        renderPresets();
        updateCanvas();
      }

      // Update fill type UI
      function updateFillTypeUI() {
        if (currentFillType === "solid") {
          secondaryColorRow.style.display = "none";
          angleRow.style.display = "none";
          spreadRow.style.display = "none";
          primaryColorLabel.textContent = "Color";
        } else if (currentFillType === "linear") {
          secondaryColorRow.style.display = "flex";
          angleRow.style.display = "flex";
          spreadRow.style.display = "none";
          primaryColorLabel.textContent = "Primary Color";
        } else if (currentFillType === "radial") {
          secondaryColorRow.style.display = "flex";
          angleRow.style.display = "none";
          spreadRow.style.display = "flex";
          primaryColorLabel.textContent = "Primary Color";
        }
      }

      // Update canvas
      function updateCanvas() {
        // Update icon content
        iconContent.textContent = currentSettings.emoji;
        iconContent.style.color = currentSettings.iconColor;
        iconContent.style.fontSize = currentSettings.iconSize + "px";

        // Update background
        if (currentFillType === "solid") {
          iconCanvas.style.background = currentSettings.primaryColor;
        } else if (currentFillType === "linear") {
          iconCanvas.style.background = `linear-gradient(${currentSettings.angle}deg, ${currentSettings.primaryColor}, ${currentSettings.secondaryColor})`;
        } else if (currentFillType === "radial") {
          iconCanvas.style.background = `radial-gradient(circle, ${currentSettings.primaryColor}, ${currentSettings.secondaryColor})`;
        }

        // Update border radius
        iconCanvas.style.borderRadius = currentSettings.radius + "px";

        // Update swatches
        primarySwatch.style.background = currentSettings.primaryColor;
        secondarySwatch.style.background = currentSettings.secondaryColor;
        iconColorSwatch.style.background = currentSettings.iconColor;
      }

      // Event listeners for fill type tabs
      fillTypeTabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          currentFillType = tab.dataset.fill;
          currentSettings.fillType = currentFillType;
          currentPresetIndex = -1;
          fillTypeTabs.forEach((t) => t.classList.remove("active"));
          tab.classList.add("active");
          updateFillTypeUI();
          updateCanvas();
          renderPresets();
        });
      });

      // Emoji input
      emojiInput.addEventListener("input", (e) => {
        currentSettings.emoji = e.target.value || "üé®";
        currentPresetIndex = -1;
        updateCanvas();
        renderPresets();
      });

      // Color inputs
      primaryColor.addEventListener("input", (e) => {
        currentSettings.primaryColor = e.target.value;
        currentPresetIndex = -1;
        updateCanvas();
        renderPresets();
      });

      secondaryColor.addEventListener("input", (e) => {
        currentSettings.secondaryColor = e.target.value;
        currentPresetIndex = -1;
        updateCanvas();
        renderPresets();
      });

      iconColor.addEventListener("input", (e) => {
        currentSettings.iconColor = e.target.value;
        currentPresetIndex = -1;
        updateCanvas();
        renderPresets();
      });

      // Color swatch clicks
      primarySwatch.addEventListener("click", () => primaryColor.focus());
      secondarySwatch.addEventListener("click", () => secondaryColor.focus());
      iconColorSwatch.addEventListener("click", () => iconColor.focus());

      // Angle controls
      angleSlider.addEventListener("input", (e) => {
        currentSettings.angle = parseInt(e.target.value);
        angleInput.value = e.target.value;
        currentPresetIndex = -1;
        updateCanvas();
        renderPresets();
      });

      angleInput.addEventListener("input", (e) => {
        currentSettings.angle = parseInt(e.target.value);
        angleSlider.value = e.target.value;
        currentPresetIndex = -1;
        updateCanvas();
        renderPresets();
      });

      // Radius slider
      radiusSlider.addEventListener("input", (e) => {
        currentSettings.radius = parseInt(e.target.value);
        radiusValue.textContent = e.target.value + "px";
        updateCanvas();
      });

      // Icon size slider
      iconSizeSlider.addEventListener("input", (e) => {
        currentSettings.iconSize = parseInt(e.target.value);
        iconSizeValue.textContent = e.target.value + "px";
        updateCanvas();
      });

      // Spread slider
      spreadSlider.addEventListener("input", (e) => {
        currentSettings.spread = parseInt(e.target.value);
        spreadValue.textContent = e.target.value + "%";
        updateCanvas();
      });

      // Panel toggle
      document.querySelectorAll(".control-panel-header").forEach((header) => {
        header.addEventListener("click", () => {
          const content = header.nextElementSibling;
          content.classList.toggle("collapsed");
        });
      });

      // Export PNG
      exportPngBtn.addEventListener("click", async () => {
        exportPngBtn.disabled = true;
        exportPngBtn.textContent = "Exporting...";

        try {
          const canvas = await html2canvas(iconCanvas, {
            backgroundColor: null,
            scale: 2,
          });

          canvas.toBlob((blob) => {
            const url = URL.createObjectURL(blob);
            const link = document.createElement("a");
            link.download = "icon.png";
            link.href = url;
            link.click();
            URL.revokeObjectURL(url);
            showToast("Exported PNG!");
          });
        } catch (error) {
          console.error("Export failed:", error);
          showToast("Export failed");
        } finally {
          exportPngBtn.disabled = false;
          exportPngBtn.textContent = "Export PNG";
        }
      });

      // Copy SVG
      copySvgBtn.addEventListener("click", () => {
        const size = 512;
        const radius = currentSettings.radius * 2;
        let background = "";

        if (currentFillType === "solid") {
          background = `fill="${currentSettings.primaryColor}"`;
        } else if (currentFillType === "linear") {
          background = `fill="url(#gradient)"`;
        } else if (currentFillType === "radial") {
          background = `fill="url(#gradient)"`;
        }

        let gradientDef = "";
        if (currentFillType === "linear") {
          const angle = currentSettings.angle;
          const rad = (angle * Math.PI) / 180;
          const x2 = Math.cos(rad) * 100;
          const y2 = Math.sin(rad) * 100;
          gradientDef = `
    <defs>
      <linearGradient id="gradient" x1="0%" y1="0%" x2="${x2}%" y2="${y2}%">
        <stop offset="0%" stop-color="${currentSettings.primaryColor}" />
        <stop offset="100%" stop-color="${currentSettings.secondaryColor}" />
      </linearGradient>
    </defs>`;
        } else if (currentFillType === "radial") {
          gradientDef = `
    <defs>
      <radialGradient id="gradient" cx="50%" cy="50%" r="50%">
        <stop offset="0%" stop-color="${currentSettings.primaryColor}" />
        <stop offset="100%" stop-color="${currentSettings.secondaryColor}" />
      </radialGradient>
    </defs>`;
        }

        const svg = `<svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" xmlns="http://www.w3.org/2000/svg">${gradientDef}
  <rect width="${size}" height="${size}" rx="${radius}" ${background} />
  <text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-size="${currentSettings.iconSize}" fill="${currentSettings.iconColor}">${currentSettings.emoji}</text>
</svg>`;

        navigator.clipboard.writeText(svg).then(() => {
          showToast("Copied SVG to clipboard!");
        });
      });

      // Initialize
      renderPresets();
      updateFillTypeUI();
      updateCanvas();
    </script>
  </body>
</html>
