<!doctype html>
<html lang="en" class="dark" style="color-scheme: dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Icon Maker - Ray.so</title>
    <link rel="stylesheet" href="icons.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  </head>
  <body class="isolate">
    <nav class="flex items-center gap-3 h-[50px] pl-4 pr-5 bg-gray-2 text-white w-full fixed z-10">
      <div class="flex items-center gap-3">
        <a href="index.html" class="inline-flex shrink-0 items-center gap-2 text-gray-12">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" class="w-6 h-6">
            <rect x="1.03" y="1.04" width="29.92" height="29.92" rx="6" fill="url(#a)" />
            <path
              fill-rule="evenodd"
              d="M6.656 8.781A2.125 2.125 0 018.781 6.656h2.063a2.125 2.125 0 012.124 2.063h6.064a2.125 2.125 0 012.125-2.063h2.062a2.125 2.125 0 012.125 2.125v2.063a2.125 2.125 0 01-2.062 2.124v6.064a2.125 2.125 0 012.062 2.125v2.062a2.125 2.125 0 01-2.125 2.125h-2.062a2.125 2.125 0 01-2.125-2.062h-6.064a2.125 2.125 0 01-2.124 2.062H8.781a2.125 2.125 0 01-2.125-2.125v-2.062a2.125 2.125 0 012.063-2.125V12.97a2.125 2.125 0 01-2.063-2.125V8.781z"
              fill="url(#b)"
            />
            <defs>
              <radialGradient id="a" cx="0" cy="0" r="1" gradientTransform="rotate(91.168 7.98 8.62) scale(29.927)">
                <stop stop-color="#1F1D20" />
                <stop offset="1" stop-color="#0E0315" />
              </radialGradient>
              <radialGradient
                id="b"
                cx="0"
                cy="0"
                r="1"
                gradientTransform="rotate(99.08 6.863 10.984) scale(21.472 21.65)"
              >
                <stop offset=".51" stop-color="#06C" />
                <stop offset="1" stop-color="#75D1FF" />
              </radialGradient>
            </defs>
          </svg>
          <span class="text-[15px] font-medium">Icon Maker</span>
        </a>
        <div class="-ml-2 flex items-center gap-[4px]">
          <span class="text-sm text-gray-9">by </span>
          <a href="https://raycast.com" target="_blank" class="text-sm text-gray-12 font-medium">Raycast</a>
        </div>
      </div>
    </nav>

    <main class="flex flex-col min-h-full pt-[50px]">
      <div style="display: flex; min-height: calc(100vh - 50px); position: relative">
        <!-- Preview Area -->
        <div style="flex: 1; display: flex; align-items: center; justify-content: center; padding: 32px">
          <div
            id="iconCanvas"
            style="
              width: 256px;
              height: 256px;
              display: flex;
              align-items: center;
              justify-content: center;
              border-radius: 64px;
              background: linear-gradient(45deg, #8e2de2, #4a00e0);
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
              transition: all 300ms;
            "
          >
            <span id="iconContent" style="font-size: 128px; line-height: 1">ðŸŽ¨</span>
          </div>
        </div>

        <!-- Controls Panel -->
        <div
          style="
            width: 360px;
            padding: 24px;
            background: #232526;
            border-left: 1px solid #ffffff0d;
            overflow-y: auto;
            max-height: calc(100vh - 50px);
          "
        >
          <!-- Icon Input -->
          <details open style="margin-bottom: 16px">
            <summary
              style="
                cursor: pointer;
                background: #343434;
                padding: 12px 16px;
                border-radius: 6px;
                font-size: 13px;
                color: #fff;
              "
            >
              Icon
            </summary>
            <div style="padding: 16px 8px">
              <input
                type="text"
                id="emojiInput"
                value="ðŸŽ¨"
                maxlength="4"
                style="
                  width: 100%;
                  padding: 16px;
                  font-size: 32px;
                  text-align: center;
                  background: #ffffff0d;
                  border: 1px solid #ffffff1a;
                  border-radius: 8px;
                  color: #fff;
                "
              />
            </div>
          </details>

          <!-- Gradient Presets -->
          <details open style="margin-bottom: 16px">
            <summary
              style="
                cursor: pointer;
                background: #343434;
                padding: 12px 16px;
                border-radius: 6px;
                font-size: 13px;
                color: #fff;
              "
            >
              Gradient Presets
            </summary>
            <div
              id="presetsGrid"
              style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; padding: 16px 8px"
            ></div>
          </details>

          <!-- Fill Styles -->
          <details open style="margin-bottom: 16px">
            <summary
              style="
                cursor: pointer;
                background: #343434;
                padding: 12px 16px;
                border-radius: 6px;
                font-size: 13px;
                color: #fff;
              "
            >
              Fill Styles
            </summary>
            <div style="padding: 16px 8px">
              <div
                style="
                  display: flex;
                  gap: 8px;
                  padding: 4px;
                  background: #2a2a2a;
                  border-radius: 8px;
                  margin-bottom: 16px;
                "
              >
                <button
                  class="fill-tab active"
                  data-fill="linear"
                  style="
                    flex: 1;
                    padding: 8px;
                    border: none;
                    border-radius: 6px;
                    background: #0066cc;
                    color: #fff;
                    cursor: pointer;
                    font-size: 13px;
                  "
                >
                  Linear
                </button>
                <button
                  class="fill-tab"
                  data-fill="radial"
                  style="
                    flex: 1;
                    padding: 8px;
                    border: none;
                    border-radius: 6px;
                    background: transparent;
                    color: #fff6;
                    cursor: pointer;
                    font-size: 13px;
                  "
                >
                  Radial
                </button>
                <button
                  class="fill-tab"
                  data-fill="solid"
                  style="
                    flex: 1;
                    padding: 8px;
                    border: none;
                    border-radius: 6px;
                    background: transparent;
                    color: #fff6;
                    cursor: pointer;
                    font-size: 13px;
                  "
                >
                  Solid
                </button>
              </div>

              <div style="margin-bottom: 16px">
                <label style="display: block; font-size: 13px; color: #fff6; margin-bottom: 8px" id="primaryLabel"
                  >Primary Color</label
                >
                <div style="display: flex; gap: 8px">
                  <div
                    id="primarySwatch"
                    style="width: 42px; height: 42px; border-radius: 8px; cursor: pointer; border: 1px solid #ffffff1a"
                  ></div>
                  <input
                    type="text"
                    id="primaryColor"
                    value="#8E2DE2"
                    style="
                      flex: 1;
                      padding: 10px;
                      background: #ffffff0d;
                      border: 1px solid #ffffff1a;
                      border-radius: 8px;
                      color: #fff;
                      font-family: monospace;
                    "
                  />
                </div>
              </div>

              <div id="secondaryRow" style="margin-bottom: 16px">
                <label style="display: block; font-size: 13px; color: #fff6; margin-bottom: 8px">Secondary Color</label>
                <div style="display: flex; gap: 8px">
                  <div
                    id="secondarySwatch"
                    style="width: 42px; height: 42px; border-radius: 8px; cursor: pointer; border: 1px solid #ffffff1a"
                  ></div>
                  <input
                    type="text"
                    id="secondaryColor"
                    value="#4A00E0"
                    style="
                      flex: 1;
                      padding: 10px;
                      background: #ffffff0d;
                      border: 1px solid #ffffff1a;
                      border-radius: 8px;
                      color: #fff;
                      font-family: monospace;
                    "
                  />
                </div>
              </div>

              <div id="angleRow" style="margin-bottom: 16px">
                <label
                  style="
                    display: flex;
                    justify-content: space-between;
                    font-size: 13px;
                    color: #fff6;
                    margin-bottom: 8px;
                  "
                  ><span>Angle</span><span id="angleValue">45Â°</span></label
                >
                <input type="range" id="angleSlider" min="0" max="360" value="45" style="width: 100%" />
              </div>
            </div>
          </details>

          <!-- Background -->
          <details open style="margin-bottom: 16px">
            <summary
              style="
                cursor: pointer;
                background: #343434;
                padding: 12px 16px;
                border-radius: 6px;
                font-size: 13px;
                color: #fff;
              "
            >
              Background
            </summary>
            <div style="padding: 16px 8px">
              <label
                style="display: flex; justify-content: space-between; font-size: 13px; color: #fff6; margin-bottom: 8px"
                ><span>Radius</span><span id="radiusValue">64px</span></label
              >
              <input type="range" id="radiusSlider" min="0" max="128" value="64" style="width: 100%" />
            </div>
          </details>

          <!-- Icon Options -->
          <details open style="margin-bottom: 16px">
            <summary
              style="
                cursor: pointer;
                background: #343434;
                padding: 12px 16px;
                border-radius: 6px;
                font-size: 13px;
                color: #fff;
              "
            >
              Icon Options
            </summary>
            <div style="padding: 16px 8px">
              <div style="margin-bottom: 16px">
                <label style="display: block; font-size: 13px; color: #fff6; margin-bottom: 8px">Color</label>
                <div style="display: flex; gap: 8px">
                  <div
                    id="iconColorSwatch"
                    style="width: 42px; height: 42px; border-radius: 8px; cursor: pointer; border: 1px solid #ffffff1a"
                  ></div>
                  <input
                    type="text"
                    id="iconColor"
                    value="#FFFFFF"
                    style="
                      flex: 1;
                      padding: 10px;
                      background: #ffffff0d;
                      border: 1px solid #ffffff1a;
                      border-radius: 8px;
                      color: #fff;
                      font-family: monospace;
                    "
                  />
                </div>
              </div>
              <label
                style="display: flex; justify-content: space-between; font-size: 13px; color: #fff6; margin-bottom: 8px"
                ><span>Size</span><span id="iconSizeValue">128px</span></label
              >
              <input type="range" id="iconSizeSlider" min="32" max="200" value="128" style="width: 100%" />
            </div>
          </details>

          <!-- Export -->
          <button
            id="exportBtn"
            style="
              width: 100%;
              padding: 12px;
              background: #0066cc;
              color: #fff;
              border: none;
              border-radius: 8px;
              cursor: pointer;
              font-size: 14px;
              font-weight: 500;
              margin-bottom: 8px;
            "
          >
            Export PNG
          </button>
          <button
            id="copyBtn"
            style="
              width: 100%;
              padding: 12px;
              background: #ffffff0d;
              color: #fff;
              border: 1px solid #ffffff1a;
              border-radius: 8px;
              cursor: pointer;
              font-size: 14px;
            "
          >
            Copy SVG
          </button>
        </div>
      </div>
    </main>

    <div
      id="toast"
      style="
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%);
        background: #232526;
        color: #fff;
        padding: 12px 24px;
        border-radius: 8px;
        opacity: 0;
        transition: opacity 200ms;
        pointer-events: none;
      "
    >
      Copied!
    </div>

    <script>
      const presets = [
        { type: "Linear", start: "#8E2DE2", end: "#4A00E0", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#99F2C8", end: "#1F4037", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#F953C6", end: "#B91D73", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#91EAE4", end: "#7F7FD5", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#F5AF19", end: "#F12711", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#EAAFC8", end: "#EC2F4B", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#FF7DB4", end: "#654EA3", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#00B4DB", end: "#003357", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#A8C0FF", end: "#3F2B96", angle: 90, icon: "#FFFFFF" },
        { type: "Linear", start: "#DD1818", end: "#380202", angle: 135, icon: "#FFFFFF" },
        { type: "Linear", start: "#DECBA4", end: "#3E5151", angle: 45, icon: "#FFFFFF" },
        { type: "Linear", start: "#FC466B", end: "#3F5EFB", angle: 180, icon: "#FFFFFF" },
        { type: "Radial", start: "#695BF8", end: "#131308", icon: "#FFFFFF" },
        { type: "Radial", start: "#4d4d4d", end: "#000000", icon: "#e6e6e6" },
        { type: "Radial", start: "#f5af19", end: "#f12711", icon: "#FFFFFF" },
        { type: "Radial", start: "#1D6E47", end: "#041B11", icon: "#DCEEDE" },
      ];

      let state = {
        fillType: "linear",
        primaryColor: "#8E2DE2",
        secondaryColor: "#4A00E0",
        angle: 45,
        radius: 64,
        iconColor: "#FFFFFF",
        iconSize: 128,
        emoji: "ðŸŽ¨",
        presetIndex: 0,
      };

      const $ = (id) => document.getElementById(id);
      const canvas = $("iconCanvas"),
        content = $("iconContent"),
        toast = $("toast");

      function renderPresets() {
        $("presetsGrid").innerHTML = presets
          .map((p, i) => {
            const bg =
              p.type === "Linear"
                ? `linear-gradient(${p.angle}deg,${p.start},${p.end})`
                : `radial-gradient(circle,${p.start},${p.end})`;
            return `<div onclick="applyPreset(${i})" style="height:48px;border-radius:8px;cursor:pointer;background:${bg};border:2px solid ${i === state.presetIndex ? "#0066cc" : "transparent"}"></div>`;
          })
          .join("");
      }

      function applyPreset(i) {
        const p = presets[i];
        state.presetIndex = i;
        state.fillType = p.type.toLowerCase();
        state.primaryColor = p.start;
        state.secondaryColor = p.end;
        state.iconColor = p.icon;
        if (p.angle) state.angle = p.angle;
        $("primaryColor").value = p.start;
        $("secondaryColor").value = p.end;
        $("iconColor").value = p.icon;
        if (p.angle) {
          $("angleSlider").value = p.angle;
          $("angleValue").textContent = p.angle + "Â°";
        }
        document
          .querySelectorAll(".fill-tab")
          .forEach((t) => t.classList.toggle("active", t.dataset.fill === state.fillType));
        updateFillUI();
        renderPresets();
        update();
      }

      function updateFillUI() {
        const isSolid = state.fillType === "solid",
          isLinear = state.fillType === "linear";
        $("secondaryRow").style.display = isSolid ? "none" : "block";
        $("angleRow").style.display = isLinear ? "block" : "none";
        $("primaryLabel").textContent = isSolid ? "Color" : "Primary Color";
      }

      function update() {
        content.textContent = state.emoji;
        content.style.color = state.iconColor;
        content.style.fontSize = state.iconSize + "px";
        canvas.style.borderRadius = state.radius + "px";

        if (state.fillType === "solid") canvas.style.background = state.primaryColor;
        else if (state.fillType === "linear")
          canvas.style.background = `linear-gradient(${state.angle}deg,${state.primaryColor},${state.secondaryColor})`;
        else canvas.style.background = `radial-gradient(circle,${state.primaryColor},${state.secondaryColor})`;

        $("primarySwatch").style.background = state.primaryColor;
        $("secondarySwatch").style.background = state.secondaryColor;
        $("iconColorSwatch").style.background = state.iconColor;
      }

      function showToast(msg) {
        toast.textContent = msg;
        toast.style.opacity = "1";
        setTimeout(() => (toast.style.opacity = "0"), 2000);
      }

      // Events
      $("emojiInput").oninput = (e) => {
        state.emoji = e.target.value || "ðŸŽ¨";
        update();
      };
      $("primaryColor").oninput = (e) => {
        state.primaryColor = e.target.value;
        state.presetIndex = -1;
        renderPresets();
        update();
      };
      $("secondaryColor").oninput = (e) => {
        state.secondaryColor = e.target.value;
        state.presetIndex = -1;
        renderPresets();
        update();
      };
      $("iconColor").oninput = (e) => {
        state.iconColor = e.target.value;
        update();
      };
      $("angleSlider").oninput = (e) => {
        state.angle = e.target.value;
        $("angleValue").textContent = e.target.value + "Â°";
        update();
      };
      $("radiusSlider").oninput = (e) => {
        state.radius = e.target.value;
        $("radiusValue").textContent = e.target.value + "px";
        update();
      };
      $("iconSizeSlider").oninput = (e) => {
        state.iconSize = e.target.value;
        $("iconSizeValue").textContent = e.target.value + "px";
        update();
      };

      document.querySelectorAll(".fill-tab").forEach(
        (t) =>
          (t.onclick = () => {
            state.fillType = t.dataset.fill;
            state.presetIndex = -1;
            document.querySelectorAll(".fill-tab").forEach((tab) => {
              tab.classList.remove("active");
              tab.style.background = "transparent";
              tab.style.color = "#fff6";
            });
            t.classList.add("active");
            t.style.background = "#0066cc";
            t.style.color = "#fff";
            updateFillUI();
            renderPresets();
            update();
          }),
      );

      $("exportBtn").onclick = async () => {
        $("exportBtn").textContent = "Exporting...";
        $("exportBtn").disabled = true;
        try {
          const c = await html2canvas(canvas, { backgroundColor: null, scale: 2 });
          c.toBlob((blob) => {
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.download = "icon.png";
            a.href = url;
            a.click();
            URL.revokeObjectURL(url);
            showToast("Exported PNG!");
          });
        } finally {
          $("exportBtn").textContent = "Export PNG";
          $("exportBtn").disabled = false;
        }
      };

      $("copyBtn").onclick = () => {
        const svg = `<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg"><defs>${state.fillType !== "solid" ? `<linearGradient id="g"><stop stop-color="${state.primaryColor}"/><stop offset="1" stop-color="${state.secondaryColor}"/></linearGradient>` : ""}</defs><rect width="512" height="512" rx="${state.radius * 2}" fill="${state.fillType === "solid" ? state.primaryColor : "url(#g)"}"/><text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-size="${state.iconSize}" fill="${state.iconColor}">${state.emoji}</text></svg>`;
        navigator.clipboard.writeText(svg).then(() => showToast("Copied SVG!"));
      };

      renderPresets();
      updateFillUI();
      update();
    </script>
  </body>
</html>
