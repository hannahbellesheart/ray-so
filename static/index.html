<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ray.so - Code Screenshot Tool</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navigation">
      <div class="nav-content">
        <div class="nav-left">
          <div class="nav-dropdown">
            <button class="nav-trigger" id="navTrigger">
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                <rect x="3" y="14" width="7" height="7" rx="1"></rect>
              </svg>
              <span>Code Screenshot</span>
            </button>
            <div class="nav-menu" id="navMenu">
              <a href="index.html" class="nav-menu-item active">
                <div class="nav-menu-icon">üì∏</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Code Screenshot</div>
                  <div class="nav-menu-desc">Create beautiful code screenshots</div>
                </div>
              </a>
              <a href="icon.html" class="nav-menu-item">
                <div class="nav-menu-icon">üé®</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Icon Maker</div>
                  <div class="nav-menu-desc">Generate gradient icons</div>
                </div>
              </a>
              <a href="prompts.html" class="nav-menu-item">
                <div class="nav-menu-icon">üí¨</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">AI Prompts</div>
                  <div class="nav-menu-desc">Browse AI prompt templates</div>
                </div>
              </a>
              <a href="presets.html" class="nav-menu-item">
                <div class="nav-menu-icon">‚öôÔ∏è</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">AI Presets</div>
                  <div class="nav-menu-desc">AI configuration presets</div>
                </div>
              </a>
              <a href="quicklinks.html" class="nav-menu-item">
                <div class="nav-menu-icon">üîó</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Quicklinks</div>
                  <div class="nav-menu-desc">Quick access links</div>
                </div>
              </a>
              <a href="snippets.html" class="nav-menu-item">
                <div class="nav-menu-icon">‚úÇÔ∏è</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Snippets</div>
                  <div class="nav-menu-desc">Text snippets & symbols</div>
                </div>
              </a>
              <a href="themes.html" class="nav-menu-item">
                <div class="nav-menu-icon">üé®</div>
                <div class="nav-menu-text">
                  <div class="nav-menu-title">Themes</div>
                  <div class="nav-menu-desc">Color themes</div>
                </div>
              </a>
            </div>
          </div>
        </div>
        <div class="nav-by">by <a href="https://raycast.com" class="nav-raycast" target="_blank">Raycast</a></div>
      </div>
    </nav>

    <!-- Main App -->
    <div class="app">
      <div class="content-area">
        <div class="frame-container">
          <div class="outer-frame">
            <div class="code-frame" id="codeFrame">
              <div class="transparent-pattern"></div>
              <div class="window" id="window">
                <div class="window-header">
                  <div class="window-buttons">
                    <div class="window-button red"></div>
                    <div class="window-button yellow"></div>
                    <div class="window-button green"></div>
                  </div>
                  <div class="window-title">untitled.js</div>
                  <div></div>
                </div>
                <div class="editor-container">
                  <div class="line-numbers" id="lineNumbers">1</div>
                  <textarea
                    class="code-editor"
                    id="codeEditor"
                    placeholder="Paste your code here..."
                    spellcheck="false"
                  >
function greet(name) {
  return `Hello, ${name}!`;
}

console.log(greet('World'));</textarea
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Controls Panel -->
      <div class="controls">
        <div class="control-group">
          <label class="control-label">Language</label>
          <select id="languageSelect">
            <option value="javascript">JavaScript</option>
            <option value="typescript">TypeScript</option>
            <option value="python">Python</option>
            <option value="html">HTML</option>
            <option value="css">CSS</option>
            <option value="json">JSON</option>
            <option value="bash">Bash</option>
            <option value="rust">Rust</option>
            <option value="go">Go</option>
          </select>
        </div>

        <div class="control-group">
          <label class="control-label">Theme</label>
          <select id="themeSelect">
            <option value="dark">Dark</option>
            <option value="light">Light</option>
          </select>
        </div>

        <div class="control-group">
          <label class="control-label">Background</label>
          <div class="control-input">
            <input type="checkbox" id="backgroundToggle" checked />
            <label for="backgroundToggle">Show</label>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label">Line Numbers</label>
          <div class="control-input">
            <input type="checkbox" id="lineNumbersToggle" checked />
            <label for="lineNumbersToggle">Show</label>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label">Padding</label>
          <select id="paddingSelect">
            <option value="16">Small</option>
            <option value="32" selected>Medium</option>
            <option value="64">Large</option>
          </select>
        </div>

        <div class="control-group">
          <button class="primary" id="exportBtn">
            <span>üì∏</span>
            <span>Export PNG</span>
          </button>
        </div>
      </div>
    </div>

    <script>
      // Navigation
      const navTrigger = document.getElementById("navTrigger");
      const navMenu = document.getElementById("navMenu");

      navTrigger.addEventListener("click", () => {
        navMenu.classList.toggle("show");
        navTrigger.classList.toggle("active");
      });

      document.addEventListener("click", (e) => {
        if (!navTrigger.contains(e.target) && !navMenu.contains(e.target)) {
          navMenu.classList.remove("show");
          navTrigger.classList.remove("active");
        }
      });

      // Code editor elements
      const codeEditor = document.getElementById("codeEditor");
      const lineNumbers = document.getElementById("lineNumbers");
      const window = document.getElementById("window");
      const codeFrame = document.getElementById("codeFrame");
      const languageSelect = document.getElementById("languageSelect");
      const themeSelect = document.getElementById("themeSelect");
      const backgroundToggle = document.getElementById("backgroundToggle");
      const lineNumbersToggle = document.getElementById("lineNumbersToggle");
      const paddingSelect = document.getElementById("paddingSelect");
      const exportBtn = document.getElementById("exportBtn");

      // Update line numbers
      function updateLineNumbers() {
        const lines = codeEditor.value.split("\n").length;
        lineNumbers.innerHTML = Array.from({ length: lines }, (_, i) => i + 1).join("\n");
      }

      codeEditor.addEventListener("input", updateLineNumbers);
      codeEditor.addEventListener("scroll", () => {
        lineNumbers.scrollTop = codeEditor.scrollTop;
      });

      // Theme toggle
      themeSelect.addEventListener("change", (e) => {
        if (e.target.value === "light") {
          window.classList.add("light-mode");
        } else {
          window.classList.remove("light-mode");
        }
      });

      // Background toggle
      backgroundToggle.addEventListener("change", (e) => {
        if (e.target.checked) {
          codeFrame.classList.remove("no-background");
        } else {
          codeFrame.classList.add("no-background");
        }
      });

      // Line numbers toggle
      lineNumbersToggle.addEventListener("change", (e) => {
        if (e.target.checked) {
          lineNumbers.classList.remove("hidden");
        } else {
          lineNumbers.classList.add("hidden");
        }
      });

      // Padding control
      paddingSelect.addEventListener("change", (e) => {
        codeFrame.style.padding = `${e.target.value}px`;
      });

      // Export to PNG
      exportBtn.addEventListener("click", async () => {
        exportBtn.disabled = true;
        exportBtn.innerHTML = "<span>‚è≥</span><span>Exporting...</span>";

        try {
          const canvas = await html2canvas(document.querySelector(".outer-frame"), {
            backgroundColor: null,
            scale: 2,
          });

          const link = document.createElement("a");
          link.download = "code-screenshot.png";
          link.href = canvas.toDataURL();
          link.click();
        } catch (error) {
          console.error("Export failed:", error);
        } finally {
          exportBtn.disabled = false;
          exportBtn.innerHTML = "<span>üì∏</span><span>Export PNG</span>";
        }
      });

      // Initialize
      updateLineNumbers();
    </script>
  </body>
</html>
